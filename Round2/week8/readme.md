### EC2란 무엇인가

- EC2 는 안전하고 크기 조정이 가능한 컴퓨팅 파워를 클라우드에서 제공하는 웹 서비스이다.
- 간단한 웹 서비스 인터페이스를 통해 간편하게 필요한 용량을 얻고 구성할 수 있다.
- 컴퓨팅 리소스에 대한 포괄적인 제어권을 제공하며, Amazon의 컴퓨팅 인프라에서 실행한다.
- 새로운 서버 인스턴스를 획득하고 부팅하는데 필요한 시간을 단 몇 분으로 단축하여 컴퓨팅 요구 사항의 변화에 따라 신속하게 용량을 확장하거나 축소할 수 있다.
- 장애에 대한 복원력이 뛰어나고 일반적인 오류 상황에 영향을 받지 않는 애플리케이션을 구출할 수 있도록 도구를 제공한다.

### EC2의 가격 정책

- On-Demand: 실행하는 인스턴스에 따라 시간 또는 초당 컴퓨팅 파워로 측정된 가격 지불
    - 약정은 없으며, 장기적인 수요 예측이 힘든 상황에서 유연하게 EC2를 사용하고 싶을 때
- Spot Instance: 경매 형식으로 시장에 남는 인스턴스를 저렴하게 구매하여 사용하는 방식
    - 최대 90% 정도 저렴하나, 언제 다시 반납해야 할지 알 수 없음
    - 시작과 종료가 자유롭거나 추가적인 컴퓨팅 파워가 필요한 경우 사용
- Reserved Instance(RI): 미리 일정 기간(1~3년) 약정해서 사용하는 방식
    - 최대 75% 저렴하며, 수요 예측이 확실할 때 사용한다.
    - 따라서 비용 절감을 위해 일정 기간 약정이 가능한 사용자
- Dedicated(전용 호스트): 실제 물리적인 서버를 임대하는 방식으로 가격이 비쌈
    - 라이선스 이슈(Windows Server 등)
    - 규정에 따라 필요한 경우

### EC2 타입 종류

- application의 성격과 목적에 따라 다양한 타입 중 가장 적합한 것을 선택한다.

|  | 타입명 | 설명 | 예시 |
| --- | --- | --- | --- |
| 범용 | t2 | 저렴한 비용 | 웹서버, DB |
|  | m5 | 범용 | 애플리케이션 서버 |
| 컴퓨팅 최적화 | c5 | 컴퓨팅 최적화 | CPU 성능이 중요한 애플리케이션/DB |
|  | f1 | 하드웨어 가속 | 유전 연구, 금융 분석, 빅데이터 분석 |
| 메모리 최적화 | r4 | 메모리 최적화 | 메모리 성능이 중요한 애플리케이션/DB |
|  | x1e | 메모리 최적화 | Spark |
|  | p3 | 그래픽 최적화 | 머신러닝, 블록체인 |
| 저장 최적화 | h1 | 디스크 쓰루풋 최적화 | 하둡/맵리듀스 |
|  | i3 | 디스크 속도 최적화 | NoSQL/데이터 웨어하우스 |
|  | d2 | 디스크 최적화 | 파일서버/데이터 웨어하우스/하둡 |

### EC2 와 다른 AWS 서비스

- AWS 에는 수 많은 서비스가 있으며, 각 서비스는 유기적인 관계를 맺고 있다.
- 아래는 AWS 에서 추천하는 Public과 Private subnet이 있는 2-tear 아키텍처의 예시이다.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d3232af7-e629-456a-8f18-2e4882584c58/Untitled.png)

### EBS / Instance Storage

- EBS (Elastic Block Store) 는 AWS 클라우드의 Amazon EC2 인스턴스에 사용할 영구 블록 스토리지 볼륨을 제공한다.
- 각 Amazon EBS 볼륨은 가용 영역 내에 자동으로 복제되어 구성요소 장애로부터 보호해주고, 고가용성 및 내구성을 제공한다.
- Amazon EBS 볼륨은 워크로드 실행에 필요한 지연 시간이 짧으며 일관된 성능을 제공한다.
- Amazon EBS 를 사용하면 사용량을 쉽게 변경할 수 있으며, 프로비저닝한 부분에 대해서만 저렴한 비용을 지불한다.

⇒ EC2 를 CPU + 그래픽카드 + 메모리 등으로 비유하자면, EBS 는 하드디스크이다.

⇒ EBS 는 게임 등 애플리케이션을 설치하고 실행할 수 있는 공간이며, S3와 비교하면 S3는 단순히 파일을 저장하는 공간 서비스이다.

- EBS Based: 반 영구적인 파일 저장 가능
    - Snapshot 기능이 있으며, 인스턴스 업그레이드 가능하다.
    - Stop 이 가능하다.
    - EC2 와 EBS 는 네트워크로 연결되어 별도로 존재하기 때문에 EC2 를 Stop 해도 EBS 의 내용은 보존된다.
- Instance Storage: 휘발성이나 빠른 방식
    - 빠르지만 저장이 필요없는 경우에 사용하며, Stop 이 불가능하다.
    - Instance Storage 는 EC2 내부에 존재하며, EC2 를 Stop 하면 함께 사라진다.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b3beb098-75f4-4914-aa85-d6ab049c6803/Untitled.png)

### AMI (Amazon Machine Image)

- AMI 는 인스턴스를 시작하는데 필요한 정보를 제공한다.
- 인스턴스를 시작할 때는 AMI 를 지정해야 하며, 동일한 구성의 인스턴스가 여러개 필요할 때는 하나의 AMI 에서 여러 인스턴스를 시작할 수 있다.
- 서로 다른 구성의 인스턴스가 필요할 때는 다양한 AMI 를 사용하여 인스턴스를 시작하면 된다.

- AMI 는 아래 기능을 포함한다.
    - 1개 이상의 EBS 스냅샷 또는 인스턴스 저장 지원 AMI 의 경우 인스턴스 루트 볼륨에 대한 템플릿 (예: 운영체제, 애플리케이션 서버, 애플리케이션)
    - AMI 를 사용하여 인스턴스를 시작할 수 있는 AWS 계정 제어 권한
    - 시작할 때 인스턴스에 연결할 볼륨을 지정하는 블록 디바이스 매핑

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/431ed55b-fd22-4b5c-b281-8c3d9ec163f3/Untitled.png)

### AMI 를 통한 Backup / Scale out / Scale up

1. 현재 EC2 의 AMI 를 만들어 Backup 한다.
2. 동일한 성능의 EC2 또는 기존의 EC2 보다 더 좋은 성능의 새로운 EC2 를 기존의 AMI 로 실행한다.
